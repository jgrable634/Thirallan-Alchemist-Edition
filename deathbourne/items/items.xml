<?xml version="1.0" encoding="utf-8" ?>
<items>
	<!--Tiles and Animations-->
	<tilesheet id="icons.png" width="16" height="10" />
	<animation id="equipment.test_sword" count="8" offsetX="-4" offsetY="2"/>
	<animation id="equipment.test_sword.idle" count="1"/>
	<animation id="test_sword.attack" count="8"/>
	<tilesheet id="deathbourne_range.png" width="16" height="16"/>
	<tile id="test_blast" sheet="deathbourne_range.png" x="0" y="0" />
    <animation id="equipment.test_blast.idle" x="0" count="1" length="3" offsetX="4" offsetY="-1" />
    <animation id="equipment.test_blast" x="1" count="8" offsetY="5" offsetX="-2" length="2" />
    <tile id="test_sword" sheet="deathbourne_swing.png" x="0" />
	<tile id="deathbourne_present.ico" sheet="icons.png" x="2" y="0" />
    <tile id="test_sword.ico" sheet="icons.png" x="0" y="0" />
	<tile id="deathbourne_shot" sheet="icons.png" x="1" y="0" />
	<tile id="test_sword2" sheet="deathbourne_swing.png" x="0" y="0" />
	<animation id="test_sword2.attack" count="7" />
	<animation id="test_sword2.walk" count="4" />
	<!--Deathbourne and the Ranged Version-->
	<item id="test_blast" type="equipment" slot="shield" unequip="false" use="attack" cost="500" weight="10" attack="12" range="10" stamina="15" durability="1000" icon="test_sword.ico" element="arcane">
		<projectile tile="deathbourne_shot" speed="5" delay="9" offsetY="6" offsetX="20" />
	</item>
	<include id="etrotta.xml" />
    <item id="test_sword" type="equipment" slot="weapon" cost="1000" weight="10" attack="13" knockback="11" stamina="10" durability="1000" icon="test_sword.ico" repair="evo_gem" element="arcane">
		<action id="equip" name="equip" />
			<onEquip>
				<equip id="test_blast" to="player" fromInventory="false" />
			</onEquip>
			<onUnequip>
				<action>
					player.equipment.get("shield").set(null);
				</action>
			</onUnequip>
		<action id="use" name="transform">
			<run procedure="switch_mode" />
		</action>
	</item>
	<!--The Crafter Version of Deathbourne-->
    <item id="test_sword3" type="object" cost="-5" weight="10" icon="test_sword.ico">
		<action id="use" name="summon">
			<choose>
				<section if="!getFlag('deathbourne_intro1')">
					<dialogue section="Deathbourne" id="intro1" />
					<dialogue section="Deathbourne" id="intro2" speaker='player' />
					<dialogue section="Deathbourne" id="intro3" />
					<action>setFlag('deathbourne_intro1', true)</action>
					<window type="craft" includeStorehouse="true">
						<recipe type="workshop"/>
						<recipe type="magic_forge" />
					</window>	
				</section>
				<section if="getFlag('deathbourne_intro1')">
					<window type="craft" includeStorehouse="true">
						<recipe type="workshop" />
						<recipe type="magic_forge" />
					</window>
				</section>
			</choose>
		</action>
		<action id="use" name="revert" consume="true">
			<dialogue section="Deathbourne" id="farewell1" />
			<dialogue section="Deathbourne" id="shudder" speaker='player' />
		 	<item id="test_sword" modal="true" />
		</action>
	</item>
	<!--The Anniversary Update-->
	<item id="test_present" type="object" cost="1" weight="1" icon="deathbourne_present.ico">
		<action id="use" name="open">
			<dialogue section="Deathbourne" id="gift" speaker='player' />
			<dialogue section="Deathbourne" id="gift2" />
			<damage object="player" damage="500" ignoreArmor="true" element="fire" hitEffect="fire_lg_dot"  />
		</action>
	</item>
	<!--The Familiar Versions of Deathbourne-->
	<familiar id="test_sword2" type="ground" costPerSecond="0.25">
		<attack type="melee" damage="15" cost="10" hitEffect="fire_lg_dot" />
	</familiar>
	<item id="test_sword2" type="animal" cost="-5" durability="500" weight="30" slot="familiar" icon="test_sword.ico">
		<action id="equip" /><action id="rename" /><equipCost health="1" durability="-20" full="false" />
		<familiar id="test_sword2" tile="test_sword2" animation="test_sword2" />
	</item>
	<familiar id="test_sword4" type="ground">
		<attack type="melee" damage="10" cost="1" hitEffect="fire_lg_dot" />
	</familiar>
	<item id="test_sword4" type="animal" cost="-5" durability="1000" weight="10" icon="test_sword.ico"  slot="familiar">
		<action id="equip" /><action id="feed" alt="feed_all" />
		<familiar id="test_sword4" tile="test_sword2" animation="test_sword2" />
		<food id="spirit_gem" value="500" />
		<action id="use" name="revert" consume="true">
			<dialogue section="Deathbourne" id="farewell1" />
			<dialogue section="Deathbourne" id="shudder" speaker='player' />
			<item id="test_sword" modal="true" />
		</action>
	</item>
	<!--Deathbourne's Recipe-->
	<recipe id="craft_test_sword" creates="test_sword" type="factory" available="player.questComplete('legendary_blade3')">
        <item id="steel_sword" count="1" />
        <item id="evo_gem" count="1" />
		<item id="fire_gem" count="1" />
        <item id="steel_bar" count="10" />
    </recipe>
</items>