<data>
  <procedure id='switch_mode'>
    <set id='this' value='this'/>
      <action>
        i = this.id;
        str = '&lt;window type="craft" name="common.transform">';

        swords = ['test_sword','test_sword3','test_sword4'];
        for (s in swords){
        str += '&lt;listItem icon="test_sword.ico" title="item.names>'+s+'" animation="single">
        &lt;action>if(!player.isEquipped("test_sword")){player.addItem("'+i+'",-1);} if(player.isEquipped("test_sword")){player.equipment.get("weapon").set(null); player.equipment.get("shield").set(null);} player.addItem("'+s+'",1); &lt;/action>
        &lt;closeWindows modal="true"/>
        &lt;tooltip>
        &lt;option title="item.descriptions>'+s+'" size="small" />
        &lt;/tooltip>
        &lt;/listItem>
        ';
        };

        str += '&lt;/window>';
        evalXml(str);

      </action>
  </procedure>
</data>
